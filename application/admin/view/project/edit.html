<form id="edit-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="">
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-1">所属公司</label>
        <div class="col-xs-12 col-sm-4">
            <select id="c-company_id" data-rule="required" class="form-control selectpicker" name="row[company_id]">
                {volist name="user" id="u"}
                <option value="{$u.id}"{in name="$u.id" value="$row.company_id"} selected {/in}>{$u.company_name}</option>
                {/volist}
            </select>

            <!-- <input id="company_id" data-rule="required" data-source="project/company" data-pagination="true" data-page-size="10" data-field="company_name" class="form-control selectpage" name="row[company_id]" type="text" value=""> -->
           
        </div> 
    </div> 
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-1">所属分类</label>
        <div class="col-xs-12 col-sm-4">
            <select id="c-pid" data-rule="required" class="form-control selectpicker" name="row[category_id]">
                {foreach name="cate" item="vo"}
                <option data-type="{$vo.type}" value="{$vo.id}" 
                    {in name="vo.id" value="$row.category_id" }selected{/in}
                    {in name="vo.pid" value="0" } disabled='disabled' {/in}>{$vo.name}
                </option> 
                {/foreach} 
            </select>
        </div>
    </div> 
    
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-1">位置</label>
        <div class="col-xs-12 col-sm-4">
            <select id="c-flag" class="form-control selectpicker" multiple="" name="row[flag][]">
                    {foreach name="flagList" item="vo"}
                        <option value="{$key}" {in name="key" value="$row.flag" }selected{/in}>{$vo} </option>
                    {/foreach} 
            </select>
        </div>
    </div>
    
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-1">{:__('项目名称')}:</label>
        <div class="col-xs-12 col-sm-4">
            <input id="c-name" data-rule="required" class="form-control" name="row[name]"
                type="text" value="{$row.name|htmlentities}">
        </div>
    </div>
                  
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-1">缩略图</label>
        <div class="col-xs-12 col-sm-4">
            <div class="input-group">
                <input id="c-image" data-rule="required" class="form-control" size="50" name="row[image]" type="text"
                    value="{$row.image|htmlentities}">
                <div class="input-group-addon no-border no-padding">
                    <span><button type="button" id="plupload-image" class="btn btn-danger plupload" data-input-id="c-image"
                            data-mimetype="image/gif,image/jpeg,image/png,image/jpg,image/bmp" data-multiple="false"
                            data-preview-id="p-image"><i class="fa fa-upload"></i>
                            {:__('Upload')}</button></span>
                    <span><button type="button" id="fachoose-image" class="btn btn-primary fachoose" data-input-id="c-image"
                            data-mimetype="image/*" data-multiple="false"><i class="fa fa-list"></i>
                            {:__('Choose')}</button></span>
                </div>
                <span class="msg-box n-right" for="c-image"></span>
            </div>
            <ul class="row list-inline plupload-preview" id="p-image"></ul>
        </div>
    </div>

        <div class="form-group">
                <label class="control-label col-xs-12 col-sm-1">加盟电话</label>
                <div class="col-xs-12 col-sm-4">
                    <input id="c-moblie" data-rule="required" class="form-control" name="row[moblie]" type="text" value="{$row.moblie}">
                </div>
            </div>

        <div class="form-group">
            <label class="control-label col-xs-12 col-sm-1">投资金额</label>
            <div class="col-xs-12 col-sm-4">
                <select id="c-flag" data-rule="required" class="form-control selectpicker"
                    name="row[price]">
                    <option value="1" {in name="$row.price" value="1" } selected {/in}>1-3万 </option>
                    <option value="2" {in name="$row.price" value="2" } selected {/in}>３-５万 </option>
                    <option value="3" {in name="$row.price" value="3" } selected {/in}>5-10万 </option>
                    <option value="4" {in name="$row.price" value="4" } selected {/in}>10万以上 </option>
                </select>
            </div> 
        </div> 

            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-1">点击量</label>
                <div class="col-xs-12 col-sm-4">
                    <input id="c-views" data-rule="required" class="form-control" name="row[views]" type="number"
                        value="{$row.views|htmlentities}">
                </div>
            </div>


            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-1">权重排序</label>
                <div class="col-xs-12 col-sm-4">
                    <input id="c-weigh" data-rule="required" class="form-control" name="row[weigh]"
                        type="number" value="{$row.weigh|htmlentities}">
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-1">状态</label>
                <div class="col-xs-12 col-sm-4">
                        {:build_radios('row[switch]', ['1'=>__('Normal'), '0'=>__('Hidden')], $row['switch'])}
                </div>
            </div>
            
            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-1">招商地区</label>
                <div class="col-xs-12 col-sm-4">
                    <div class="form-inline" data-toggle="cxselect" data-selects="parentid,shi">
                        <select class="parentid form-control" name="parentid">
                            <option value="">请选择</option>
                            {volist name="province" id="p"}
                                <option value="{$p.id}">{$p.areaname}</option>
                            {/volist}
                        </select>
                        <select class="shi form-control" name="shi" data-url="project/shiqu" id="city"></select>
                        <select class="form-control"  multiple="multiple" name="row[city][]"  id="box" > 
                            {volist name="$row.city" id="c"}
                            <option selected value="{$c.id}">{$c.areaname}</option>
                            {/volist}
                        </select>
                        <button id="del" type="button">删除</button>
                    </div>
                </div>
            </div>

              
            <div class="form-group">
                    <label class="control-label col-xs-12 col-sm-1">所在地区</label>
                    <div class="col-xs-12 col-sm-4">
                        <div class="form-inline" data-toggle="cxselect" data-selects="parentid,shi">
                            <select class="parentid form-control" name="parentid">
                                <option value="">请选择</option>
                                {volist name="province" id="p"}
                                    <option value="{$p.id}">{$p.areaname}</option>
                                {/volist}
                            </select>
                            <select class="shi form-control" name="row[address]" data-url="project/shiqu">
                                <option value="{$row.address.id}" selected>{$row.address.areaname}</option>
                            </select>
                        </div>
                    </div>
                </div>
    

                
            <div class="form-group">
                    <label class="control-label col-xs-12 col-sm-1">tdk-标题</label>
                    <div class="col-xs-12 col-sm-4">
                        <input id="c-title" data-rule="required" class="form-control" name="row[title]"
                            type="text" value="{$row.title|htmlentities}">
                    </div>
                </div>
        
                <div class="form-group">
                    <label class="control-label col-xs-12 col-sm-1">tdk-关键字</label>
                    <div class="col-xs-12 col-sm-4">
                        <input id="c-keywords" data-rule="required" class="form-control" name="row[keywords]"
                            type="text" value="{$row.keywords|htmlentities}">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-xs-12 col-sm-1">tdk-描述</label>
                    <div class="col-xs-12 col-sm-4">
                        <input id="c-description" data-rule="required" class="form-control" name="row[description]"
                            type="text" value="{$row.description|htmlentities}">
                    </div>
                </div>

            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-1">海报</label>
                <div class="col-xs-12 col-sm-11">
                        <script id="poster" name="row[poster]" type="text/plain">{$row.poster}</script>
                </div>
            </div>
    
            <div class="form-group">
                    <label class="control-label col-xs-12 col-sm-1">内容</label>
                    <div class="col-xs-12 col-sm-11">
                            <script id="container" name="row[content]" type="text/plain">{$row.content}</script>
                    </div>
                </div>

            <div class="form-group layer-footer">
                <label class="control-label col-xs-12 col-sm-1"></label>
                <div class="col-xs-12 col-sm-4">
                    <button type="submit" class="btn btn-success btn-embossed ">{:__('OK')}</button>
                    <button type="reset" class="btn btn-default btn-embossed">{:__('Reset')}</button>
                </div>
            </div>
</form>
<script type="text/javascript" src="__CDN__/static/home/js/jquery.js"></script>
<!-- 配置文件 -->
<script type="text/javascript" src="__CDN__/static/ueditor/ueditor.config.js"></script>
<!-- 编辑器源码文件 -->
<script type="text/javascript" src="__CDN__/static/ueditor/ueditor.all.js"></script>

<script>
        $(document).ready(function(){
        
                      // 实例化编辑器 
                      var editor = UE.getEditor('container');
        
                       // 实例化编辑器 
                       var poster = UE.getEditor('poster');
        
        
                    var city = document.getElementById("city");//获取ID
                    //定义对应的省 市 区数组
                    var DomArr = [];//此数组用于存储数据，判断重复
                    city.onchange = function()//触发事件
                    {
                        var name = city.options[city.selectedIndex].innerHTML;//获取选中文本
                        var value = city.options[city.selectedIndex].value;//获取选中文本
        
                        var String = "<option selected value="+value+">" + name + "</option>";
                        var istrue = false;//是否添加（重复）
                        DomArr.forEach(function( val, index ) {
                            if(val==String){
                                istrue=true;
                            }
                        });
                        if(!istrue){
                            DomArr.push(String);
                            $('#box').append(String);
                        }
                    }
                    
                    
                    //删除已添加到select的值
                     $('#del').click(function () {
                        var box = $("#box");
                        var name = box.find("option:selected").innerHTML;//获取选中文本
                        var value = box.find("option:selected").value;//获取选中文本
                        box.find("option:selected").remove();   //删除option
                        var String = "<option value="+value+">" + name + "</option>";
                        var local = $.inArray(String, DomArr); //根据元素值查找下标，不存在返回-1
                        DomArr.splice(local,1);//根据下标删除一个元素   1表示删除一个元素
                    })
        });
        </script>